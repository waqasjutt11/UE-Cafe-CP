{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\juttw\\\\Documents\\\\GitHub\\\\recipes-app-react-native\\\\src\\\\screens\\\\Signin\\\\SigninScreen.js\";\nimport React from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport \"firebase/firestore\";\nimport firebase from \"firebase\";\nimport * as Facebook from 'expo-facebook';\nimport { GoogleSignIn } from 'expo-google-sign-in';\n\nvar SignInScreen = function (_React$Component) {\n  _inherits(SignInScreen, _React$Component);\n\n  function SignInScreen() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SignInScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SignInScreen)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      email: '',\n      password: '',\n      errorMessage: '',\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(SignInScreen, [{\n    key: \"onLoginSuccess\",\n    value: function onLoginSuccess() {\n      this.props.navigation.navigate('Home');\n    }\n  }, {\n    key: \"onLoginFailure\",\n    value: function onLoginFailure(errorMessage) {\n      this.setState({\n        error: errorMessage,\n        loading: false\n      });\n    }\n  }, {\n    key: \"renderLoading\",\n    value: function renderLoading() {\n      if (this.state.loading) {\n        return React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30\n          }\n        }, React.createElement(ActivityIndicator, {\n          size: 'large',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31\n          }\n        }));\n      }\n    }\n  }, {\n    key: \"signInWithEmail\",\n    value: function signInWithEmail() {\n      var _this2 = this;\n\n      return _regeneratorRuntime.async(function signInWithEmail$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(firebase.auth().signInWithEmailAndPassword(this.state.email, this.state.password).then(this.onLoginSuccess.bind(this)).catch(function (error) {\n                var errorCode = error.code;\n                var errorMessage = error.message;\n\n                if (errorCode == 'auth/weak-password') {\n                  _this2.onLoginFailure.bind(_this2)('Weak Password!');\n                } else {\n                  _this2.onLoginFailure.bind(_this2)(errorMessage);\n                }\n              }));\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"signInWithFacebook\",\n    value: function signInWithFacebook() {\n      var _await$Facebook$logIn, type, token, credential, facebookProfileData, message;\n\n      return _regeneratorRuntime.async(function signInWithFacebook$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(Facebook.logInWithReadPermissionsAsync('684399708713036', {\n                permissions: ['public_profile']\n              }));\n\n            case 3:\n              _await$Facebook$logIn = _context2.sent;\n              type = _await$Facebook$logIn.type;\n              token = _await$Facebook$logIn.token;\n\n              if (!(type === 'success')) {\n                _context2.next = 14;\n                break;\n              }\n\n              _context2.next = 9;\n              return _regeneratorRuntime.awrap(firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL));\n\n            case 9:\n              credential = firebase.auth.FacebookAuthProvider.credential(token);\n              _context2.next = 12;\n              return _regeneratorRuntime.awrap(firebase.auth().signInWithCredential(credential));\n\n            case 12:\n              facebookProfileData = _context2.sent;\n              this.onLoginSuccess.bind(this);\n\n            case 14:\n              _context2.next = 20;\n              break;\n\n            case 16:\n              _context2.prev = 16;\n              _context2.t0 = _context2[\"catch\"](0);\n              message = _context2.t0.message;\n              alert(\"Facebook Login Error: \" + message);\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, [[0, 16]]);\n    }\n  }, {\n    key: \"signInWithGoogle\",\n    value: function signInWithGoogle() {\n      var _await$GoogleSignIn$s, _type, user, data, _credential, googleProfileData, message;\n\n      return _regeneratorRuntime.async(function signInWithGoogle$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(GoogleSignIn.askForPlayServicesAsync());\n\n            case 3:\n              _context3.next = 5;\n              return _regeneratorRuntime.awrap(GoogleSignIn.signInAsync());\n\n            case 5:\n              _await$GoogleSignIn$s = _context3.sent;\n              _type = _await$GoogleSignIn$s.type;\n              user = _await$GoogleSignIn$s.user;\n              _context3.next = 10;\n              return _regeneratorRuntime.awrap(GoogleSignIn.GoogleAuthentication.prototype.toJSON());\n\n            case 10:\n              data = _context3.sent;\n\n              if (!(_type === 'success')) {\n                _context3.next = 19;\n                break;\n              }\n\n              _context3.next = 14;\n              return _regeneratorRuntime.awrap(firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL));\n\n            case 14:\n              _credential = firebase.auth.GoogleAuthProvider.credential(data.idToken, data.accessToken);\n              _context3.next = 17;\n              return _regeneratorRuntime.awrap(firebase.auth().signInWithCredential(_credential));\n\n            case 17:\n              googleProfileData = _context3.sent;\n              this.onLoginSuccess.bind(this);\n\n            case 19:\n              _context3.next = 25;\n              break;\n\n            case 21:\n              _context3.prev = 21;\n              _context3.t0 = _context3[\"catch\"](0);\n              message = _context3.t0.message;\n              alert('login: Error:' + message);\n\n            case 25:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, [[0, 21]]);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(TouchableWithoutFeedback, {\n        onPress: function onPress() {\n          Keyboard.dismiss();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        }\n      }, React.createElement(SafeAreaView, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        }\n      }, React.createElement(KeyboardAvoidingView, {\n        style: styles.container,\n        behavior: \"padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 32,\n          fontWeight: \"700\",\n          color: \"gray\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        }\n      }, \"App Name\"), React.createElement(View, {\n        style: styles.form,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        }\n      }, React.createElement(TextInput, {\n        style: styles.input,\n        placeholder: \"Email\",\n        placeholderTextColor: \"#B1B1B1\",\n        returnKeyType: \"next\",\n        keyboardType: \"email-address\",\n        textContentType: \"emailAddress\",\n        value: this.state.email,\n        onChangeText: function onChangeText(email) {\n          return _this3.setState({\n            email: email\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        }\n      }), React.createElement(TextInput, {\n        style: styles.input,\n        placeholder: \"Password\",\n        placeholderTextColor: \"#B1B1B1\",\n        returnKeyType: \"done\",\n        textContentType: \"newPassword\",\n        secureTextEntry: true,\n        value: this.state.password,\n        onChangeText: function onChangeText(password) {\n          return _this3.setState({\n            password: password\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        }\n      })), this.renderLoading(), React.createElement(Text, {\n        style: {\n          fontSize: 18,\n          textAlign: \"center\",\n          color: \"red\",\n          width: \"80%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        }\n      }, this.state.error), React.createElement(TouchableOpacity, {\n        style: {\n          width: '86%',\n          marginTop: 10\n        },\n        onPress: function onPress() {\n          return _this3.signInWithEmail();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        }\n      }, \"Sign In\")), React.createElement(TouchableOpacity, {\n        style: {\n          width: \"86%\",\n          marginTop: 10\n        },\n        onPress: function onPress() {\n          return _this3.signInWithFacebook();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        }\n      }, React.createElement(View, {\n        style: styles.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        }\n      }, React.createElement(Text, {\n        style: {\n          letterSpacing: 0.5,\n          fontSize: 16,\n          color: \"#FFFFFF\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        }\n      }, \"Continue with Facebook\"))), React.createElement(TouchableOpacity, {\n        style: {\n          width: \"86%\",\n          marginTop: 10\n        },\n        onPress: function onPress() {\n          return _this3.signInWithGoogle();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        }\n      }, React.createElement(View, {\n        style: styles.googleButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        }\n      }, React.createElement(Text, {\n        style: {\n          letterSpacing: 0.5,\n          fontSize: 16,\n          color: \"#707070\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        }\n      }, \"Continue with Google\"))), React.createElement(View, {\n        style: {\n          marginTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: \"200\",\n          fontSize: 17,\n          textAlign: \"center\"\n        },\n        onPress: function onPress() {\n          _this3.props.navigation.navigate(\"SignUp\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        }\n      }, \"Don't have an Account?\")))));\n    }\n  }]);\n\n  return SignInScreen;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  form: {\n    width: \"86%\",\n    marginTop: 15\n  },\n  logo: {\n    marginTop: 20\n  },\n  input: {\n    fontSize: 20,\n    borderColor: \"#707070\",\n    borderBottomWidth: 1,\n    paddingBottom: 1.5,\n    marginTop: 25.5\n  },\n  button: {\n    backgroundColor: \"#3A559F\",\n    height: 44,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 22\n  },\n  googleButton: {\n    backgroundColor: \"#FFFFFF\",\n    height: 44,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 22,\n    borderWidth: 1,\n    borderColor: \"#707070\"\n  }\n});\nexport default SignInScreen;","map":{"version":3,"sources":["C:/Users/juttw/Documents/GitHub/recipes-app-react-native/src/screens/Signin/SigninScreen.js"],"names":["React","firebase","Facebook","GoogleSignIn","SignInScreen","state","email","password","errorMessage","loading","props","navigation","navigate","setState","error","auth","signInWithEmailAndPassword","then","onLoginSuccess","bind","catch","errorCode","code","message","onLoginFailure","logInWithReadPermissionsAsync","permissions","type","token","setPersistence","Auth","Persistence","LOCAL","credential","FacebookAuthProvider","signInWithCredential","facebookProfileData","alert","askForPlayServicesAsync","signInAsync","user","GoogleAuthentication","prototype","toJSON","data","GoogleAuthProvider","idToken","accessToken","googleProfileData","Keyboard","dismiss","flex","styles","container","fontSize","fontWeight","color","form","input","renderLoading","textAlign","width","marginTop","signInWithEmail","signInWithFacebook","button","letterSpacing","signInWithGoogle","googleButton","Component","StyleSheet","create","flexDirection","alignItems","logo","borderColor","borderBottomWidth","paddingBottom","backgroundColor","height","justifyContent","borderRadius","borderWidth"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  View,\r\n  Text,\r\n  TextInput,\r\n  SafeAreaView,\r\n  TouchableOpacity,\r\n  KeyboardAvoidingView,\r\n  ActivityIndicator,\r\n  TouchableWithoutFeedback,\r\n  Keyboard\r\n} from \"react-native\";\r\nimport \"firebase/firestore\";\r\nimport firebase from \"firebase\";\r\nimport * as Facebook from 'expo-facebook';\r\nimport { GoogleSignIn } from 'expo-google-sign-in';\r\n\r\nclass SignInScreen extends React.Component {\r\n  state = { email: '', password: '', errorMessage: '', loading: false };\r\n  onLoginSuccess() {\r\n    this.props.navigation.navigate('Home');\r\n  }\r\n  onLoginFailure(errorMessage) {\r\n    this.setState({ error: errorMessage, loading: false });\r\n  }\r\n  renderLoading() {\r\n    if (this.state.loading) {\r\n      return (\r\n        <View>\r\n          <ActivityIndicator size={'large'} />\r\n        </View>\r\n      );\r\n    }\r\n  }\r\n  async signInWithEmail() {\r\n    await firebase\r\n      .auth()\r\n      .signInWithEmailAndPassword(this.state.email, this.state.password)\r\n      .then(this.onLoginSuccess.bind(this))\r\n      .catch(error => {\r\n          let errorCode = error.code;\r\n          let errorMessage = error.message;\r\n          if (errorCode == 'auth/weak-password') {\r\n              this.onLoginFailure.bind(this)('Weak Password!');\r\n          } else {\r\n              this.onLoginFailure.bind(this)(errorMessage);\r\n          }\r\n      });\r\n  }\r\n  async signInWithFacebook() {\r\n    try {\r\n      const { type, token } = await Facebook.logInWithReadPermissionsAsync('684399708713036', {\r\n        permissions: ['public_profile'],\r\n      });\r\n      if (type === 'success') {\r\n        await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\r\n        const credential = firebase.auth.FacebookAuthProvider.credential(token);\r\n        const facebookProfileData = await firebase.auth().signInWithCredential(credential);\r\n        this.onLoginSuccess.bind(this)\r\n      }\r\n    } catch ({ message }) {\r\n      alert(`Facebook Login Error: ${message}`);\r\n    }\r\n  }\r\n  async signInWithGoogle() {\r\n    try {\r\n      await GoogleSignIn.askForPlayServicesAsync();\r\n      const { type, user } = await GoogleSignIn.signInAsync();\r\n      const data = await GoogleSignIn.GoogleAuthentication.prototype.toJSON();\r\n      if (type === 'success') {\r\n        await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\r\n        const credential = firebase.auth.GoogleAuthProvider.credential(data.idToken, data.accessToken);\r\n        const googleProfileData = await firebase.auth().signInWithCredential(credential);\r\n        this.onLoginSuccess.bind(this);\r\n      }\r\n    } catch ({ message }) {\r\n      alert('login: Error:' + message);\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <TouchableWithoutFeedback\r\n        onPress={() => {\r\n          Keyboard.dismiss();\r\n        }}\r\n      >\r\n        <SafeAreaView style={{ flex: 1 }}>\r\n          <KeyboardAvoidingView style={styles.container} behavior=\"padding\">\r\n            <Text style={{ fontSize: 32, fontWeight: \"700\", color: \"gray\" }}>\r\n              App Name\r\n            </Text>\r\n            <View style={styles.form}>\r\n              <TextInput\r\n                style={styles.input}\r\n                placeholder=\"Email\"\r\n                placeholderTextColor=\"#B1B1B1\"\r\n                returnKeyType=\"next\"\r\n                keyboardType=\"email-address\"\r\n                textContentType=\"emailAddress\"\r\n                value={this.state.email}\r\n                onChangeText={email => this.setState({ email })}\r\n              />\r\n              <TextInput\r\n                style={styles.input}\r\n                placeholder=\"Password\"\r\n                placeholderTextColor=\"#B1B1B1\"\r\n                returnKeyType=\"done\"\r\n                textContentType=\"newPassword\"\r\n                secureTextEntry={true}\r\n                value={this.state.password}\r\n                onChangeText={password => this.setState({ password })}\r\n              />\r\n            </View>\r\n            {this.renderLoading()}\r\n            <Text\r\n              style={{\r\n                fontSize: 18,\r\n                textAlign: \"center\",\r\n                color: \"red\",\r\n                width: \"80%\"\r\n              }}\r\n            >\r\n              {this.state.error}\r\n            </Text>\r\n            <TouchableOpacity\r\n              style={{ width: '86%', marginTop: 10 }}\r\n              onPress={() => this.signInWithEmail()}>\r\n                  <Text>Sign In</Text>\r\n            </TouchableOpacity>\r\n            <TouchableOpacity \r\n              style={{ width: \"86%\", marginTop: 10 }}\r\n              onPress={() => this.signInWithFacebook()}>\r\n              <View style={styles.button}>\r\n                <Text\r\n                  style={{\r\n                    letterSpacing: 0.5,\r\n                    fontSize: 16,\r\n                    color: \"#FFFFFF\"\r\n                  }}\r\n                >\r\n                  Continue with Facebook\r\n                </Text>\r\n              </View>\r\n            </TouchableOpacity>\r\n            <TouchableOpacity \r\n              style={{ width: \"86%\", marginTop: 10 }}\r\n              onPress={() => this.signInWithGoogle()}>\r\n              <View style={styles.googleButton}>\r\n                <Text\r\n                  style={{\r\n                    letterSpacing: 0.5,\r\n                    fontSize: 16,\r\n                    color: \"#707070\"\r\n                  }}\r\n                >\r\n                  Continue with Google\r\n                </Text>\r\n              </View>\r\n            </TouchableOpacity>\r\n            <View style={{ marginTop: 10 }}>\r\n              <Text\r\n                style={{ fontWeight: \"200\", fontSize: 17, textAlign: \"center\" }}\r\n                onPress={() => {\r\n                  this.props.navigation.navigate(\"SignUp\");\r\n                }}\r\n              >\r\n                Don't have an Account?\r\n              </Text>\r\n            </View>\r\n          </KeyboardAvoidingView>\r\n        </SafeAreaView>\r\n      </TouchableWithoutFeedback>\r\n    );\r\n  }\r\n}\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\"\r\n  },\r\n  form: {\r\n    width: \"86%\",\r\n    marginTop: 15\r\n  },\r\n  logo: {\r\n    marginTop: 20\r\n  },\r\n  input: {\r\n    fontSize: 20,\r\n    borderColor: \"#707070\",\r\n    borderBottomWidth: 1,\r\n    paddingBottom: 1.5,\r\n    marginTop: 25.5\r\n  },\r\n  button: {\r\n    backgroundColor: \"#3A559F\",\r\n    height: 44,\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: 22\r\n  },\r\n  googleButton: {\r\n    backgroundColor: \"#FFFFFF\",\r\n    height: 44,\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: 22,\r\n    borderWidth: 1,\r\n    borderColor: \"#707070\"\r\n  }\r\n});\r\nexport default SignInScreen;\r\n"]},"metadata":{},"sourceType":"module"}